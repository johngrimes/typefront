- @title = 'My fonts'
- content_for(:styles) do
  = stylesheet_link_tag 'fonts/index', fonts_url(:format => 'css')
- content_for(:styles_ie7) do
  = stylesheet_link_tag 'fonts/index_ie7'
- content_for(:scripts) do
  = javascript_include_tag 'jquery', 'hoverlight', 'fonts/index', :cache => 'cache/fonts/index'
%h1= @title
#upper-pagination= will_paginate(@fonts)
- if !@fonts.empty?
  %ul.fonts
    - @fonts.each do |font|
      %li.font
        .font-inner
          .description
            %h2{:class => "name font-<%= font.id %>"}= link_to(font.font_family, font, :class => 'name')
            - if !font.font_subfamily.blank?
              .face= font.font_subfamily
          = link_to('<span>Remove font</span>', font, :class => 'remove-font', :confirm => 'Are you sure you want to remove this font?', :method => :delete)
- else
  %p.empty-message= 'You have not uploaded any fonts yet.'
#lower-pagination= will_paginate(@fonts)
- if @fonts.size < current_user.fonts_allowed
  %h2#new-font-header= 'Upload a font'
  %p= 'TrueType (.ttf), OpenType (.otf) and Web Open Font Format (.woff) files can be uploaded.'
  - form_for @font, :html => { :id => 'new-font-form', :multipart => true } do |form|
    %fieldset
      = form.label :original, 'File'
      = form.file_field :original
      = form.error_message_on :original, :prepend_text => 'The font file you uploaded '
    %fieldset
      = form.submit 'Upload', :class => 'submit'
- else
  %p
    You have reached your maximum of 
    %b= current_user.fonts_allowed
    = current_user.fonts_allowed == 1 ? 'font' : 'fonts'
    on the 
    %b= current_user.subscription_name
    plan.
  %p= link_to 'Upgrade now', upgrade_url, :class => 'submit upgrade-button'
