<%
allowed_domains = @font.domains.collect { |domain| 
  { :id => domain.id,
    :domain => domain.domain } }

  font = {
    :id => @font.id,
    :name => @font.name,
    :access_url => font_url(:id => @font.id, :format => 'font'),
    :example_include_code => include_code(@font),
    :allowed_domains => allowed_domains }
  Font::INFO_FIELDS.each do |field|
    if eval('!@font.' + field + '.blank?')
      font[field.to_sym] = eval('@font.' + field)
    end
  end

  info = { :font => font }
-%>
<%= info.to_json %>
